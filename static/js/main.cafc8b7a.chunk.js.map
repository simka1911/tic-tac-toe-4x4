{"version":3,"sources":["components/player/PlayerScore.jsx","components/field/Field.jsx","components/board/Board.jsx","helpers/js/initialFields.js","helpers/js/winningMoves.js","helpers/js/minimax.js","helpers/js/constants.js","App.js","reportWebVitals.js","index.js"],"names":["PlayerScore","props","gameState","useContext","AppContext","className","classnames","color","player","currentPlayer","toString","text","score","Field","isPlayed","isGameWon","playedBy","disabled","onMouseDown","ev","preventDefault","onClick","updatefields","index","updatePlayersBoard","position","Board","fields","map","field","Math","pow","victoryMessage","initialFields","winningMoves","checkWinAfterPlayedMove","currentBoard","playedMove","winningMove","filter","findPossibleWinningCombination","forEach","possibleWinningMove","checkWinBeforePlayedMove","willPlayerWin","evaluateBoard","otherBoard","totalValue","currentValue","countBits","otherValue","number","match","length","computerMoveField","minimaxWithAlphaBetaPruning","boardOne","boardTwo","depth","maxDepth","isComputerPlayer","alpha","beta","evaluate","board","bestMove","bestResult","Infinity","possibleMoves","getPossibleMoves","sort","a","b","random","currentPossibleMove","newBoardOne","newBoardTwo","returnedResult","i","push","constants","React","createContext","App","computerTimer","useState","playerOneScore","setPlayerOneScore","playerTwoScore","setPlayerTwoScore","tieScore","setTieScore","setFields","round","setCurrentPlayer","currentBoardStatePlayerOne","setCurrentBoardStatePlayerOne","currentBoardStatePlayerTwo","setCurrentBoardStatePlayerTwo","lastPlayedField","setLastPlayedField","setIsGameWon","setVictoryMessage","isFirstRun","useRef","fieldIndex","fieldValue","items","playedField","computerPlay","setTimeout","floor","setRandomPlayer","randomNewPlayer","useEffect","current","Provider","value","clearTimeout","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"6TAMO,SAASA,EAAYC,GAExB,IAAMC,EAAYC,qBAAWC,GAE7B,OACI,sBAAKC,UAAWC,IAAW,eACP,QAAhBL,EAAMM,OAAmB,oBACT,UAAhBN,EAAMM,OAAqB,sBAC3BN,EAAMO,SAAWN,EAAUO,cAAcC,YACrC,+BAJR,UAMI,qBAAKL,UAAU,qBAAf,SACKJ,EAAMU,OAEX,qBAAKN,UAAU,sBAAf,SACKJ,EAAMW,W,MCfhB,SAASC,EAAMZ,GAElB,IAAMC,EAAYC,qBAAWC,GAU7B,OACI,qBAAKC,UAAU,QAAf,SACI,qBAAKA,UAAU,wBAAf,SACI,wBACIA,UAAWC,IAAW,iBACjBL,EAAMa,UAAYZ,EAAUa,WAAab,EAAUO,gBAAkB,2BAClD,IAApBR,EAAMe,UAA+C,IAA5Bd,EAAUO,eAAuB,2BACtC,IAApBR,EAAMe,UAA+C,IAA5Bd,EAAUO,eAAuB,0BACtC,IAAnBR,EAAMe,UAAmB,gDACN,IAAnBf,EAAMe,UAAmB,iDAE9BC,SAAUhB,EAAMa,UAAYZ,EAAUa,WAAab,EAAUO,cAC7DS,YAAa,SAAAC,GAAE,OAAIA,EAAGC,kBACtBC,QArBS,WACjBnB,EAAUO,gBAGdP,EAAUoB,aAAarB,EAAMsB,MAAO,CAACT,UAAU,EAAME,SAAUd,EAAUO,gBACzEP,EAAUsB,mBAAmBvB,EAAMwB,kB,MCRpC,SAASC,IAEX,IAAMxB,EAAYC,qBAAWC,GAExBuB,EAASzB,EAAUyB,OAAOC,KAAI,SAACC,EAAON,GACxC,OAAO,cAACV,EAAD,CAAmBY,SAAUK,KAAKC,IAAI,EAAGR,GAAQA,MAAQA,EAAQT,SAAUe,EAAMf,SAAUE,SAAUa,EAAMb,UAA/FO,MAGvB,OACI,sBAAKlB,UAAU,QAAf,UACI,qBAAKA,UAAWC,IAAW,gBAAiBJ,EAAUa,WAAa,0BAAnE,SACKY,IAEL,qBAAKtB,UAAWC,IAAW,iBAAkBJ,EAAU8B,gBAAkB,2BAAzE,SACK9B,EAAU8B,oBCrBpB,IAAMC,EAAgB,CACzB,CACInB,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,GAEf,CACIF,UAAU,EACVE,UAAW,I,OC/DNkB,EAAe,CACxB,GACA,IACA,KACA,MACA,KACA,KACA,MACA,MACA,MACA,KACA,GACA,IACA,IACA,IACA,KACA,KACA,MACA,MACA,OAWSC,EAA0B,SAACC,EAAcC,GAClD,IAAIC,EAAc,EAOlB,OAd0C,SAACD,GAC3C,OAAOH,EAAaK,QAAO,SAAAD,GACvB,OAAQA,EAAcD,KAAgBA,KAMbG,CAA+BH,GACvCI,SAAQ,SAAAC,IACpBN,EAAeM,KAAyBA,IACzCJ,EAAcI,MAGfJ,GAGEK,EAA2B,SAACP,GACrC,IADsD,EAClDQ,EAAgB,EADkC,cAErBV,GAFqB,IAErD,2BAA8C,CAAC,IAAtCQ,EAAqC,QAC3C,IAAKN,EAAeM,KAAyBA,EAAqB,CAC9DE,EAAgBF,EAChB,QAL8C,8BAQtD,OAAOE,GAOEC,EAAgB,SAACT,EAAcU,GACxC,IADuD,EACnDC,EAAa,EADsC,cAEvBb,GAFuB,IAEvD,2BAA8C,CAAC,IAAtCQ,EAAqC,QACpCM,EAAeC,EAAUP,EAAsBN,GAC/Cc,EAAaD,EAAUP,EAAsBI,GAEhC,IAAfI,GAAqC,IAAjBF,EAAoBD,GAAc,IAClC,IAAfG,GAAqC,IAAjBF,EAAoBD,GAAc,IACvC,IAAfG,GAAqC,IAAjBF,EAAoBD,GAAc,GACvC,IAAfG,GAAqC,IAAjBF,IAAoBD,GAAc,IATZ,8BAWvD,OAAOA,GAGLE,EAAY,SAACE,GACf,OAAOA,GAAUA,EAAOzC,SAAS,GAAG0C,MAAM,MAAMC,QCrEhDC,EAAoB,EAQXC,EAA8B,SAA9BA,EAA+BC,EAAUC,EAAUC,GAAwD,IAAjDC,EAAgD,uDAArC,EAAGC,EAAkC,uCAAhBC,EAAgB,uCAATC,EAAS,uCACnH,GAAInB,EAAyBiB,EAAmBH,EAAWD,IAAaG,IAAaD,EACjF,OAAOK,EAASH,EAAkBF,EAAOF,EAAUC,GAGvD,IAAMO,EAAQR,EAAWC,EAErBQ,EAAW,KACXC,EAAaN,GAAoBO,IAAYA,IAE3CC,EAAgBC,EAAiBL,GAAOM,MAAK,SAACC,EAAGC,GAAO,MAAO,GAAM1C,KAAK2C,YAEhF,IAAKL,EAAcf,OAAQ,OAAO,EAZiF,oBAcnFe,GAdmF,IAcnH,2BAA+C,CAAC,IAAvCM,EAAsC,QACrCC,EAAcf,EAAmBJ,EAAYkB,EAAsBlB,EACnEoB,EAAchB,EAAoBc,EAAsBjB,EAAYA,EACpEoB,EAAiBtB,EAA4BoB,EAAaC,EAAclB,EAAQ,EAAGC,GAAWC,EAAkBC,EAAOC,GAE7H,GAAIF,GAWA,GAVIiB,EAAiBX,IACjBA,EAAaW,EACbZ,EAAWS,GAEXR,EAAaL,IACbA,EAAQK,EACM,IAAVR,IACAJ,EAAoBW,IAGxBJ,GAASC,EAAM,CACfI,EAAaL,EACb,YAeJ,GAVIgB,EAAiBX,IACjBA,EAAaW,EACbZ,EAAWS,GAEXR,EAAaJ,IACbA,EAAOI,EACO,IAAVR,IACAJ,EAAoBW,IAGxBH,GAAQD,EAAO,CACfK,EAAaJ,EACb,QAjDuG,8BAsDnH,OAAOI,GAGLG,EAAmB,SAACL,GAEtB,IADA,IAAMI,EAAgB,GACbU,EAAI,EAAGA,EAAI,GAAIA,IACa,KAA5Bd,EAAQlC,KAAKC,IAAI,EAAG+C,KACrBV,EAAcW,KAAKjD,KAAKC,IAAI,EAAG+C,IAGvC,OAAOV,GAGLL,EAAW,SAACH,EAAkBF,EAAOF,EAAUC,GACjD,OAAIG,EACOf,EAAcY,EAAUD,GAAYE,EAGpCA,EAAQb,EAAcW,EAAUC,IClFlCuB,EACF,kBADEA,EAEH,OAFGA,EAGC,WAHDA,EAIJ,OAJIA,EAKU,cALVA,EAMW,aANXA,EAOe,iBAPfA,EAQA,eCEA5E,G,MAAa6E,IAAMC,cAAc,KAyI/BC,MAvIf,WAEE,IAAIC,EAFS,EAK+BC,mBAAS,GALxC,mBAKNC,EALM,KAKUC,EALV,OAM+BF,mBAAS,GANxC,mBAMNG,EANM,KAMUC,EANV,OAOmBJ,mBAAS,GAP5B,mBAONK,EAPM,KAOIC,EAPJ,OASeN,mBAASpD,GATxB,mBASNN,EATM,KASEiE,EATF,OAU6BP,mBAASvD,KAAK+D,MAAM/D,KAAK2C,WAVtD,mBAUNhE,EAVM,KAUSqF,EAVT,OAWuDT,mBAAS,GAXhE,mBAWNU,EAXM,KAWsBC,EAXtB,OAYuDX,mBAAS,GAZhE,mBAYNY,EAZM,KAYsBC,EAZtB,OAaiCb,mBAAS,GAb1C,mBAaNc,EAbM,KAaWC,EAbX,OAcqBf,oBAAS,GAd9B,mBAcNtE,GAdM,KAcKsF,GAdL,QAe+BhB,mBAAS,IAfxC,qBAeNrD,GAfM,MAeUsE,GAfV,MAiBPC,GAAaC,kBAAO,GAmBpBlF,GAAe,SAACmF,EAAYC,GAChC,IAAIC,EAAK,YAAOhF,GAChBgF,EAAMF,GAAcC,EACpBd,EAAUe,IAGNnF,GAAqB,SAACoF,GAC1BR,EAAmBQ,GAEdnG,EAIHyF,EAA8BD,EAA6BW,GAH3DZ,EAA8BD,EAA6Ba,IAOzDC,GAAe,WACnBzB,EAAgB0B,YAAW,WAE3B,IADE,IAAMxD,GF9DRA,EAAoB,EACpBC,EE6DyCwC,EAA4BE,EF7DrB,EAAG,GAAG,GAAM,IAAW9B,KAChEb,GE6DEwB,EAAI,EAAGA,EAAI,GAAIA,IAClBhD,KAAKC,IAAI,EAAG+C,KAAOxB,IACrBhC,GAAawD,EAAG,CAAEhE,UAAU,EAAME,SAAUP,IAC5Ce,GAAmB8B,MAGpBxB,KAAKiF,MAAM,IAAAjF,KAAK2C,SAA8B,OAG7CuC,GAAkB,WACtB,IAAMC,EAAkBnF,KAAK+D,MAAM/D,KAAK2C,UACjCwC,IAAoBxG,GAAkBA,EACzCoG,KAEGf,EAAiBmB,IAwC1B,OArCAC,qBAAU,WACJX,GAAWY,QACbZ,GAAWY,SAAU,EAGlBpB,GAA+BE,EAIhB9D,EAAwB1B,EAAgBwF,EAA6BF,EAA4BI,IAEnHE,IAAa,GACT5F,GACFgF,EAAkBD,EAAiB,GACnCc,GAAkBtB,KAGlBO,EAAkBD,EAAiB,GACnCgB,GAAkBtB,KHjFR,gBGoFIiB,EAA6BF,KAC7CM,IAAa,GACbV,EAAYD,EAAW,GACvBY,GAAkBtB,IAGlBc,GAAkBrF,EAAgB,GAAK,GArBvCuG,OAuBD,CAACjB,EAA4BE,IAEhCiB,qBAAU,WACJzG,GACFoG,OAED,CAACpG,IAGF,sBAAKJ,UAAU,MAAf,UACE,qBAAKA,UAAU,aAAf,SACG2E,IAEH,eAAC5E,EAAWgH,SAAZ,CAAqBC,MAAO,CAAE5G,gBAAee,sBAAoBG,SAAQL,gBAAcP,aAAWiB,mBAAlG,UACE,cAACN,EAAD,IACA,sBAAKrB,UAAU,aAAf,UACE,cAACL,EAAD,CAAaO,MAAM,MAAMC,OAAO,IAAIG,KAAMqE,EAAgBpE,MAAO0E,IACjE,cAACtF,EAAD,CAAaW,KAAMqE,EAAepE,MAAO8E,IACzC,cAAC1F,EAAD,CAAaO,MAAM,QAAQC,OAAO,IAAIG,KAAMqE,EAAoBpE,MAAO4E,OAEzE,qBAAKnF,UAAU,eAAf,SACE,wBACEa,YAAa,SAAAC,GAAE,OAAIA,EAAGC,kBACtBC,QA1GU,WAClBiG,aAAalC,GACbkB,GAAkB,IAClBV,EAAU3D,GACVmE,EAAmB,GACnBC,IAAa,GAERN,GAA+BE,GAKlCD,EAA8B,GAC9BE,EAA8B,IAL9Bc,MAgGI,SAIGhC,aC/HEuC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.cafc8b7a.chunk.js","sourcesContent":["import React, { useContext } from 'react';\nimport { AppContext } from '../../App';\nimport classnames from 'classnames';\n\nimport './player-score.scss';\n\nexport function PlayerScore(props) { \n\n    const gameState = useContext(AppContext);\n\n    return (\n        <div className={classnames(\"player-score\",\n            props.color === \"red\" && \"player-score--red\",\n            props.color === \"green\" && \"player-score--green\",\n            props.player === gameState.currentPlayer.toString() &&\n                \"player-score--visible-color\")}\n        >\n            <div className=\"player-score__text\">\n                {props.text}\n            </div>\n            <div className=\"player-score__value\">\n                {props.score}\n            </div>\n        </div>\n    );\n}","import React, { useContext } from 'react';\nimport { AppContext } from '../../App';\nimport classnames from 'classnames';\n\nimport './field.scss';\n\nexport function Field(props) { \n\n    const gameState = useContext(AppContext);\n\n    const handleFieldClick = () => {\n        if (gameState.currentPlayer) {\n            return;\n        }\n        gameState.updatefields(props.index, {isPlayed: true, playedBy: gameState.currentPlayer});\n        gameState.updatePlayersBoard(props.position);\n    }\n\n    return (\n        <div className=\"field\">\n            <div className=\"field__button-wrapper\">\n                <button\n                    className={classnames(\"field__button\",\n                        (props.isPlayed || gameState.isGameWon || gameState.currentPlayer) && \"field__button--disabled\",\n                        props.playedBy === -1 && gameState.currentPlayer === 0 && \"field__button--player-1\",\n                        props.playedBy === -1 && gameState.currentPlayer === 1 && \"field__button--player-2\",\n                        (props.playedBy === 0) && \"field__button--player-1 field__button--played\",\n                        (props.playedBy === 1) && \"field__button--player-2 field__button--played\")\n                    }\n                    disabled={props.isPlayed || gameState.isGameWon || gameState.currentPlayer}\n                    onMouseDown={ev => ev.preventDefault()}\n                    onClick={handleFieldClick}\n                >\n                </button>\n            </div>\n        </div>\n    );\n}","import React, { useContext } from 'react';\nimport { Field } from '../field/Field';\nimport { AppContext } from '../../App';\nimport classnames from 'classnames';\n\nimport './board.scss';\n\nexport function Board() { \n\n     const gameState = useContext(AppContext);\n\n    const fields = gameState.fields.map((field, index) => { \n        return <Field key={index} position={Math.pow(2, index)} index={ index } isPlayed={field.isPlayed} playedBy={field.playedBy} />\n    });\n\n    return (\n        <div className=\"board\">\n            <div className={classnames(\"board__fields\", gameState.isGameWon && \"board__fields--opacity\")}>\n                {fields}\n            </div>\n            <div className={classnames(\"board__message\", gameState.victoryMessage && \"board__message--opacity\")}>\n                {gameState.victoryMessage}\n            </div>\n        </div>\n    );\n}\n","export const initialFields = [ // initial field values on the board\n    {\n        isPlayed: false,\n        playedBy: -1, // 0 -> by player 1 (user), 1 -> by player 2 (computer), -1 -> not played \n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n    {\n        isPlayed: false,\n        playedBy: -1,\n    },\n];","export const winningMoves = [\n    0b0000000000001111, // first row\n    0b0000000011110000, // second row\n    0b0000111100000000, // third row\n    0b1111000000000000, // forth row\n    0b0001000100010001, // first column\n    0b0010001000100010, // second column\n    0b0100010001000100, // third column\n    0b1000100010001000, // forth column\n    0b1000010000100001, // left diagonal\n    0b0001001001001000, // right diagonal\n    0b0000000000110011, // top left square\n    0b0000000001100110, // top center square\n    0b0000000011001100, // top right square\n    0b0000001100110000, // middle left square\n    0b0000011001100000, // middle center square\n    0b0000110011000000, // middle right square\n    0b0011001100000000, // bottom left square\n    0b0110011000000000, // bottom center square\n    0b1100110000000000, // bottom right square\n];\n\nconst fullBoard = 0b1111111111111111; // board when all fields are populated\n\nexport const findPossibleWinningCombination = (playedMove) => { // find possible winning moves from played move\n    return winningMoves.filter(winningMove => { \n        return (winningMove & playedMove) === playedMove;\n    });\n}\n\nexport const checkWinAfterPlayedMove = (currentBoard, playedMove) => { // check for win right after a move has been played\n    let winningMove = 0;\n    const possibleWinningMoves = findPossibleWinningCombination(playedMove);\n    possibleWinningMoves.forEach(possibleWinningMove => {\n        if ((currentBoard & possibleWinningMove) === possibleWinningMove) { \n            winningMove = possibleWinningMove;\n        }\n    });\n    return winningMove;\n}\n\nexport const checkWinBeforePlayedMove = (currentBoard) => { // check for win for the curent board state\n    let willPlayerWin = 0;\n     for (let possibleWinningMove of winningMoves) {\n        if ((currentBoard & possibleWinningMove) === possibleWinningMove) { \n            willPlayerWin = possibleWinningMove;\n            break;\n        }\n    };\n    return willPlayerWin;\n}\n\nexport const checkTie = (board) => { // check if whole board is populated without anyone winning\n    return ((board & fullBoard) === fullBoard);\n}\n\nexport const evaluateBoard = (currentBoard, otherBoard) => { // heuristic for current player's board state\n    let totalValue = 0;\n    for (let possibleWinningMove of winningMoves) {\n        const currentValue = countBits(possibleWinningMove & currentBoard); // check how many moves did current player make in given row, column, diagonal or square\n        const otherValue = countBits(possibleWinningMove & otherBoard); // check how many moves did opponent make in given row, column, diagonal or square\n\n        if (otherValue === 0 && currentValue === 4) totalValue += 1000; // current player has all of it's moves played in this combination, opponent has none\n        else if (otherValue === 0 && currentValue === 3) totalValue += 100; // current player has 3 out of 4 of it's moves played in this combination, opponent has none\n        else if (otherValue === 0 && currentValue === 2) totalValue += 10; // current player has 2 out of 4 of it's moves played in this combination, opponent has none\n        else if (otherValue === 0 && currentValue === 1) totalValue += 1; // current player has 1 out of 4 of it's moves played in this combination, opponent has none\n    }\n    return totalValue;\n}\n\nconst countBits = (number) => { // count number of bit 1 in a number\n    return number && number.toString(2).match(/1/g).length;\n}","import { checkWinBeforePlayedMove, evaluateBoard } from './winningMoves';\n\nlet computerMoveField = 0; // field which will be chosen by computer to be played\n\nexport const computerMove = (boardOne, boardTwo) => {\n    computerMoveField = 0;\n    minimaxWithAlphaBetaPruning(boardOne, boardTwo, 0, 4, true, -Infinity, Infinity);\n    return computerMoveField;\n}\n\nexport const minimaxWithAlphaBetaPruning = (boardOne, boardTwo, depth, maxDepth = 4, isComputerPlayer, alpha, beta) => { // maxDepth of 4 should be enough, increasing the depth will slow down the execution\n    if (checkWinBeforePlayedMove(isComputerPlayer ? boardTwo : boardOne) || maxDepth === depth) {\n        return evaluate(isComputerPlayer, depth, boardOne, boardTwo);\n    }\n\n    const board = boardOne | boardTwo;\n\n    let bestMove = null;\n    let bestResult = isComputerPlayer ? -Infinity : +Infinity;\n\n    const possibleMoves = getPossibleMoves(board).sort((a, b) => {return 0.5 - Math.random()});\n\n    if (!possibleMoves.length) return 0;\n\n    for (let currentPossibleMove of possibleMoves) {\n        const newBoardOne = isComputerPlayer ? boardOne : (currentPossibleMove | boardOne);\n        const newBoardTwo = isComputerPlayer ? (currentPossibleMove | boardTwo) : boardTwo;\n        const returnedResult = minimaxWithAlphaBetaPruning(newBoardOne, newBoardTwo,  depth + 1, maxDepth, !isComputerPlayer, alpha, beta);\n        \n        if (isComputerPlayer) { // maximizing player\n            if (returnedResult > bestResult) {\n                bestResult = returnedResult;\n                bestMove = currentPossibleMove;\n            }\n            if (bestResult > alpha) { \n                alpha = bestResult;\n                if (depth === 0) {\n                    computerMoveField = bestMove;\n                }\n            }\n            if (alpha >= beta) {\n                bestResult = alpha;\n                break;\n            }\n        }\n\n        else { // minimizing player\n            if (returnedResult < bestResult) {\n                bestResult = returnedResult;\n                bestMove = currentPossibleMove;\n            }\n            if (bestResult < beta) { \n                beta = bestResult;\n                if (depth === 0) { \n                    computerMoveField = bestMove;\n                }\n            } \n            if (beta <= alpha) {\n                bestResult = beta;\n                break;\n            }\n        }\n    };\n\n    return bestResult;\n}\n\nconst getPossibleMoves = (board) => { // returns all playable moves\n    const possibleMoves = [];\n    for (let i = 0; i < 16; i++) { \n        if ((board & Math.pow(2, i)) === 0) { \n            possibleMoves.push(Math.pow(2, i));\n        }\n    }\n    return possibleMoves;\n}\n\nconst evaluate = (isComputerPlayer, depth, boardOne, boardTwo) => { // evaluate board depending on current player (maximizing or minimizing)\n    if (isComputerPlayer) {\n        return evaluateBoard(boardTwo, boardOne) - depth;\n    }\n    else { \n        return depth - evaluateBoard(boardOne, boardTwo);\n    }\n}","export const constants = {\n    title: \"Tic-Tac-Toe 4x4\",\n    user: \"User\",\n    computer: \"Computer\",\n    tie: \"Ties\",\n    victoryMessageTie: \"It's a tie!\",\n    victoryMessageUser: \"User wins!\",\n    victoryMessageComputer: \"Computer wins!\",\n    restart: \"Restart Game\",\n};","import React, { useState, useEffect, useRef } from 'react';\nimport { PlayerScore } from './components/player/PlayerScore';\nimport { Board } from './components/board/Board';\nimport { initialFields } from './helpers/js/initialFields';\nimport { checkWinAfterPlayedMove, checkTie } from './helpers/js/winningMoves'\nimport { computerMove } from './helpers/js/minimax';\nimport { constants } from './helpers/js/constants';\n\nimport './App.scss';\n\nexport const AppContext = React.createContext({});\n\nfunction App() {\n\n  let computerTimer; // timer used for computer to give it some time to play field\n\n  // all states are in the root component:\n  const [playerOneScore, setPlayerOneScore] = useState(0); // total score of player 1 (user)\n  const [playerTwoScore, setPlayerTwoScore] = useState(0); // total score of player 2 (computer)\n  const [tieScore, setTieScore] = useState(0); // total number of tied games\n\n  const [fields, setFields] = useState(initialFields); // initial fields of the board\n  const [currentPlayer, setCurrentPlayer] = useState(Math.round(Math.random())); // 0 -> player 1 (user), 1 -> player 2 (computer)\n  const [currentBoardStatePlayerOne, setCurrentBoardStatePlayerOne] = useState(0); // player 1 board (moves player 1 made on whole board)\n  const [currentBoardStatePlayerTwo, setCurrentBoardStatePlayerTwo] = useState(0); // player 2 board (moves player 2 made on whole board)\n  const [lastPlayedField, setLastPlayedField] = useState(0);\n  const [isGameWon, setIsGameWon] = useState(false);\n  const [victoryMessage, setVictoryMessage] = useState(\"\");\n\n  const isFirstRun = useRef(true);\n\n  const restartGame = () => {\n    clearTimeout(computerTimer);\n    setVictoryMessage(\"\");\n    setFields(initialFields);\n    setLastPlayedField(0);\n    setIsGameWon(false);\n\n    if (!currentBoardStatePlayerOne && !currentBoardStatePlayerTwo) { \n      setRandomPlayer();\n    }\n\n    else { \n      setCurrentBoardStatePlayerOne(0);\n      setCurrentBoardStatePlayerTwo(0);\n    }\n  }\n\n  const updatefields = (fieldIndex, fieldValue) => {\n    let items = [...fields];\n    items[fieldIndex] = fieldValue;\n    setFields(items);\n  }\n\n  const updatePlayersBoard = (playedField) => {\n    setLastPlayedField(playedField);\n\n    if (!currentPlayer) { // player 1 is on the move\n      setCurrentBoardStatePlayerOne(currentBoardStatePlayerOne | playedField);\n    }\n    else { // player 2 is on the move\n      setCurrentBoardStatePlayerTwo(currentBoardStatePlayerTwo | playedField);\n    }\n  }\n\n  const computerPlay = () => {\n    computerTimer = setTimeout(() => {\n      const computerMoveField = computerMove(currentBoardStatePlayerOne, currentBoardStatePlayerTwo);\n    for (let i = 0; i < 16; i++) { \n      if (Math.pow(2, i) === computerMoveField) { \n        updatefields(i, { isPlayed: true, playedBy: currentPlayer });\n        updatePlayersBoard(computerMoveField);\n      }\n    }\n    }, Math.floor(Math.random() * (1000 - 500 + 1) + 500));\n  }\n\n  const setRandomPlayer = () => { \n    const randomNewPlayer = Math.round(Math.random());\n      if ((randomNewPlayer === currentPlayer) && currentPlayer) { \n        computerPlay();\n      }\n      else setCurrentPlayer(randomNewPlayer);\n  }\n\n  useEffect(() => {\n    if (isFirstRun.current) { // don't execute on initial load\n      isFirstRun.current = false;\n      return;\n    }\n    if (!currentBoardStatePlayerOne && !currentBoardStatePlayerTwo) {\n      setRandomPlayer();\n      return;\n    }\n    const checkForWin = checkWinAfterPlayedMove(currentPlayer ? currentBoardStatePlayerTwo : currentBoardStatePlayerOne, lastPlayedField);\n    if (checkForWin) {\n      setIsGameWon(true);\n      if (currentPlayer) {\n        setPlayerTwoScore(playerTwoScore + 1)\n        setVictoryMessage(constants.victoryMessageComputer);\n      }\n      else {\n        setPlayerOneScore(playerOneScore + 1)\n        setVictoryMessage(constants.victoryMessageUser);\n      }\n    }\n    else if (checkTie(currentBoardStatePlayerTwo ^ currentBoardStatePlayerOne)) {\n      setIsGameWon(true);\n      setTieScore(tieScore + 1);\n      setVictoryMessage(constants.victoryMessageTie);\n    }\n    else {\n      setCurrentPlayer((currentPlayer + 1) % 2);\n    }\n  }, [currentBoardStatePlayerOne, currentBoardStatePlayerTwo]);\n\n  useEffect(() => {\n    if (currentPlayer) { // if player is computer execute it's code\n      computerPlay(); \n    }\n  }, [currentPlayer]);\n\n  return (\n    <div className=\"app\">\n      <div className=\"app__title\">\n        {constants.title}\n      </div>\n      <AppContext.Provider value={{ currentPlayer, updatePlayersBoard, fields, updatefields, isGameWon, victoryMessage }}>\n        <Board />\n        <div className=\"app__score\">\n          <PlayerScore color=\"red\" player=\"0\" text={constants.user} score={playerOneScore} />\n          <PlayerScore text={constants.tie} score={tieScore} />\n          <PlayerScore color=\"green\" player=\"1\" text={constants.computer} score={playerTwoScore} />\n        </div>\n        <div className=\"app__restart\">\n          <button\n            onMouseDown={ev => ev.preventDefault()}\n            onClick={restartGame}\n          >\n            {constants.restart}\n          </button> \n        </div>\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}